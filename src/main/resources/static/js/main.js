(()=>{"use strict";const e=document.querySelector(".header"),t=document.querySelector(".logo"),n=document.querySelector(".siteExpl"),i=document.querySelector(".insectFilterBtn"),_=document.querySelector(".navBtns"),a=document.querySelectorAll(".navBtns__btn"),o=document.querySelectorAll(".navBtns__btn__text"),c=()=>{_.remove(),i.remove()},s=[e,t,n,i,_,...a,...o],r=()=>{const e=document.querySelector(".main");if(10>document.documentElement.scrollTop)for(let t of Object.values(s))t.classList.remove("js-headerScrollOn"),e.classList.remove("js-headerScrollOn");else if(!s[0].classList.contains("js-headerScrollOn"))for(let t of Object.values(s))t.classList.add("js-headerScrollOn"),e.classList.add("js-headerScrollOn")},l=e=>{e.classList.add("hidden")},m=e=>{e.classList.remove("hidden")},u=e=>{e.classList.add("active")},d=e=>{e.classList.remove("active")},g=document.querySelector(".search__form__cover"),p=document.querySelector(".search__form__close"),S=document.querySelector(".search__form"),v=document.querySelector(".navBtns__btn--searchRecipe"),f=(e,t)=>{document.querySelector("header").insertAdjacentHTML("afterend",'\n    <div class="confirmDialog__cover"></div>\n  '),document.querySelector(e).insertAdjacentHTML("afterend",(e=>`\n    <div class="confirm">\n      <span class="confirm__message">${e}</span>\n      <div class="confirm__btns">\n        <button class="confirm__btns__btn confirm__btns__btn--yes" type="submit">はい</button>\n        <button class="confirm__btns__btn confirm__btns__btn--cancel" type="button">キャンセル</button>\n      </div>\n    </div>\n  `)(t));const n=document.querySelector(".confirm__btns__btn--cancel"),i=document.querySelector(".confirmDialog__cover");n.addEventListener("click",(()=>{document.querySelector(e).nextElementSibling.remove(),i.remove()})),i.addEventListener("click",(()=>{document.querySelector(e).nextElementSibling.remove(),i.remove()}))},b=(e,t)=>{const n=document.querySelectorAll(e);for(let i of n)i.addEventListener("click",(()=>f(e,t)))},y=()=>{const e=document.querySelectorAll(".recipeSection");for(let t of e)t.children[0].addEventListener("click",(()=>{location.href=t.dataset.recipeHref})),t.children[1].addEventListener("click",(()=>{location.href=t.dataset.recipeHref})),t.children[2].addEventListener("click",(()=>{location.href=t.dataset.recipeHref}))},h=()=>{const e=document.querySelectorAll(".heartBtn");for(let t of e)t.addEventListener("click",(()=>{const e=t.firstElementChild,n=t.lastElementChild;"heart-outline"==e.name?(e.name="heart",n.textContent=+n.textContent+1):(e.name="heart-outline",n.textContent=+n.textContent-1)}))},q=()=>{const e=document.querySelector(".insectFilterBtn__label"),t=document.querySelectorAll(".recipeImage");e.addEventListener("click",(()=>{for(let e of t)e.classList.toggle("filter")}))},L=(e,t)=>{const[n]=e.target.files;n&&t.setAttribute("src",URL.createObjectURL(n))},E=document.querySelector(".registerRecipe__tags"),B=document.querySelector(".tag__select__list"),w=document.querySelector(".tag__input");let k=1;const I=()=>{k++},x=()=>k,j=()=>w.value,$=e=>{B.classList.toggle("hidden"),e.classList.toggle("open"),e.classList.contains("open")?e.textContent="閉じる":e.textContent="一覧から選ぶ"},A=e=>{E.insertAdjacentHTML("beforeend",(e=>`\n    <span class="registerRecipe__tag" id="tagId_${x()}">\n      <input class="registerRecipe__tag__value" type="hidden" name="tags" value="${e.textContent}" />\n      <span class="registerRecipe__tag__name"><span>#</span>${e.textContent}</span>\n      <button class="registerRecipe__tag__deleteBtn" type="button" data-tag-id="tagId_${x()}">\n        <ion-icon name="trash-outline"></ion-icon>\n      </button>\n    </span>\n  `)(e));const t=E.querySelector(`button[data-tag-id="tagId_${x()}"]`);t.addEventListener("click",(()=>{t.parentNode.remove()})),I()},R=document.querySelector(".registerRecipe__materials__list");let C=1;const H=()=>C,T=()=>{R.insertAdjacentHTML("beforeend",`\n    <li class="material" id="matarialId_${H()}">\n      <input class="material__name" type="text" name="materials" placeholder="材料名" />\n      <input class="material__amount" type="text" name="amounts" placeholder="数量" />\n      <button class="material__deleteBtn" type="button" data-material-id="materialId_${H()}">\n        <ion-icon name="trash-outline"></ion-icon>\n      </button>\n    </li>\n  `);const e=R.querySelector(`button[data-material-id="materialId_${H()}"]`);e.addEventListener("click",(()=>{R.children.length<=1||e.parentNode.remove()})),C++},M=document.querySelector(".registerRecipe__howto__list");let O=1;const F=()=>O,N=()=>{M.insertAdjacentHTML("beforeend",`\n    <div class="howto" id="howtoId_${F()}">\n      <div class="howto__action">\n        <span class="howto__num">${M.children.length+1}</span>\n        <button class="howto__deleteBtn" type="button" data-howto-id="howtoId_${F()}">\n          <ion-icon name="trash-outline"></ion-icon>\n        </button>\n      </div>\n      <div class="howto__item">\n        <label class="howto__image__input__label">\n          <span class="howto__image__input__label__text">画像を選択</span>\n          <input class="howto__image__input" type="file" name="procedureImages" accept="image/jpeg,image/png" />\n        </label>\n        <div class="howto__image" style="height: 40px">\n          <img class="howto__image__preview" />\n          <button class="howto__image__deleteBtn hidden" type="button">\n            <ion-icon name="trash-outline"></ion-icon>\n          </button>\n        </div>\n        <textarea class="howto__text" name="contexts" placeholder="作り方を入力"></textarea>\n      </div>\n    </div>\n  `);const e=M.querySelector(`#howtoId_${F()}`);e.querySelector(".howto__deleteBtn").addEventListener("click",(()=>{M.children.length<=1||(e.remove(),(()=>{for(let[e,t]of Object.entries(M.children))t.querySelector(".howto__num").textContent=+e+1})())}));const t=e.querySelector(".howto__image"),n=e.querySelector(".howto__image__input"),i=t.firstElementChild,_=t.lastElementChild;n.addEventListener("change",(()=>{t.style.height="100px",L(event,i),m(_)})),_.addEventListener("click",(()=>{t.style.height="40px",i.src="",n.value="",l(_)})),O++},V=(e,t,n)=>{return`\n    <form class="acountSetting__form" action="/users/${t}/${"icon"==e?"user-icon":"mail"==e?"user-mail":"user-name"}/update" enctype="multipart/form-data" method="post">\n      ${"icon"==e?(a=n,`\n    <div class="acountSetting__form__iconImage acountSetting__form__iconImage--before">\n      <span class="acountSetting__form__iconImage__title acountSetting__form__iconImage__title--before">変更前</span>\n      <span class="acountSetting__form__iconImage__preview acountSetting__form__iconImage__preview--before">\n        <img src="/images/user-icons/${a}">\n      </span>\n    </div>\n    <span class="acountSetting__form__iconImage__Arrow">\n      <ion-icon name="caret-down-outline"></ion-icon>\n    </span>\n    <div class="acountSetting__form__iconImage acountSetting__form__iconImage--after">\n      <span class="acountSetting__form__iconImage__title acountSetting__form__iconImage__title--after">変更後</span>\n      <span class="acountSetting__form__iconImage__preview acountSetting__form__iconImage__preview--after">\n        <ion-icon name="image-outline"></ion-icon>\n        <img>\n      </span>\n      <label class="acountSetting__form__iconImage__preview__input__label">\n        <span class="acountSetting__form__iconImage__preview__input__label__text">画像を変更</span>\n        <input class="acountSetting__form__iconImage__preview__input" type="file" name="file" accept="image/jpeg,image/png" />\n      </label>\n    </div>\n  `):"mail"==e?(_=n,`\n    <div class="acountSetting__form__mail acountSetting__form__mail--before">\n      <span class="acountSetting__form__mail__title acountSetting__form__mail__title--before">現在のメールアドレス</span>\n      <span class="acountSetting__form__mail__input acountSetting__form__mail__input--before">${_}<span>\n    </div>\n    <div class="acountSetting__form__mail acountSetting__form__mail--after">\n      <span class="acountSetting__form__mail__title acountSetting__form__mail__title--after">新しいメールアドレス</span>\n      <input class="acountSetting__form__mail__input acountSetting__form__mail__input--after" type="email" name="mail" placeholder="新しいメールアドレスを入力" />\n    </div>\n  `):(i=n,`\n    <div class="acountSetting__form__username acountSetting__form__username--before">\n      <span class="acountSetting__form__username__title acountSetting__form__username__title--before">現在のユーザーネーム</span>\n      <span class="acountSetting__form__username__input acountSetting__form__username__input--before">${i}<span>\n    </div>\n    <div class="acountSetting__form__username acountSetting__form__username--after">\n      <span class="acountSetting__form__username__title acountSetting__form__username__title--after">新しいユーザーネーム</span>\n      <input class="acountSetting__form__username__input acountSetting__form__username__input--after" type="text" name="name" placeholder="新しいユーザーネームを入力" />\n    </div>\n  `)}\n      <button class="acountSetting__form__btn" type="submit">送信</button>\n    </form>\n  `;var i,_,a},D=e=>{for(let t of Object.values(e.children))l(t)},U=e=>{for(let t of Object.values(e.children))m(t)},z=e=>{l(e)},G=e=>{m(e)};v.addEventListener("click",(()=>{m(g),m(S)})),g.addEventListener("click",(()=>{l(g),l(S)})),p.addEventListener("click",(()=>{l(g),l(S)})),["","/","/index","/index.html"].includes(location.pathname)&&((()=>{for(let e of Object.values(s))e.classList.remove("js-headerScrollOn");window.addEventListener("scroll",r)})(),y(),h(),q()),["/login/form","/login"].includes(location.pathname)&&c(),["/signup/form","/signup"].includes(location.pathname)&&(c(),b(".signup__form__btn","この内容で登録しますか")),["/recipes/register/form"].includes(location.pathname)&&((()=>{const e=document.querySelector(".registerRecipe__image__input"),t=document.querySelector(".registerRecipe__image__preview");e.addEventListener("change",(()=>{L(event,t)}))})(),(()=>{const e=document.querySelector(".tag__select__btn");e.addEventListener("click",(()=>{$(e)}));const t=B.firstElementChild.children;for(let n of t)n.addEventListener("click",(()=>{A(n),$(e)}));document.querySelector(".tag__addBtn").addEventListener("click",(()=>{(()=>{E.insertAdjacentHTML("beforeend",`\n    <span class="registerRecipe__tag" id="tagId_${x()}">\n      <input class="registerRecipe__tag__value" type="hidden" name="tags" value="${j()}" />\n      <span class="registerRecipe__tag__name"><span>#</span>${j()}</span>\n      <button class="registerRecipe__tag__deleteBtn" type="button" data-tag-id="tagId_${x()}">\n        <ion-icon name="trash-outline"></ion-icon>\n      </button>\n    </span>\n  `);const e=E.querySelector(`button[data-tag-id="tagId_${x()}"]`);e.addEventListener("click",(()=>{e.parentNode.remove()})),w.value="",I()})()}))})(),(()=>{for(let e=0;e<3;e++)T()})(),document.querySelector(".material__addBtn").addEventListener("click",(()=>{T()})),(()=>{for(let e=0;e<2;e++)N()})(),document.querySelector(".howto__addBtn").addEventListener("click",(()=>{N()})),b(".registerRecipe__submitBtn","この内容で登録しますか")),["/mypage"].includes(location.pathname)&&((()=>{const e=document.querySelector(".tabChangeBtn--myRecipe"),t=document.querySelector(".tabChangeBtn--myFavRecipe"),n=document.querySelector(".tabChangeBtn__line"),i=document.querySelector(".myRecipe__list"),_=document.querySelector(".myFavRecipe__list");e.addEventListener("click",(()=>{l(_),m(i),u(e),d(t),n.className="tabChangeBtn__line myRecipe"})),t.addEventListener("click",(()=>{l(i),m(_),u(t),d(e),n.className="tabChangeBtn__line myFavRecipe"}))})(),(()=>{const e=document.querySelector(".acountSettingBtn"),t=document.querySelector(".userInfoValue--id"),n=document.querySelector(".userInfoValue--icon"),i=document.querySelector(".userInfoValue--name"),_=document.querySelector(".userInfoValue--mail");e.addEventListener("click",(()=>((e,t,n,i)=>{document.querySelector("header").insertAdjacentHTML("afterend",((e,t,n,i)=>`\n    <section class="acountSetting">\n      <button class="acountSetting__closeBtn" type="button">\n        <span>閉じる</span>\n        <ion-icon name="close-outline"></ion-icon>\n      </button>\n      <span class="acountSetting__title">アカウント設定</span>\n      <div class="acountSetting__items">\n        <div class="acountSetting__items__item acountSetting__items__item--icon">\n          <span class="acountSetting__items__item__title acountSetting__items__item__title--icon">アイコン</span>\n          <div class="acountSetting__items__item__parts">\n            <span class="acountSetting__icon__image">\n              <img src="/images/user-icons/${t}" />\n            </span>\n            <button class="acountSetting__items__item__editBtn acountSetting__items__item__editBtn--icon">\n              <ion-icon name="pencil"></ion-icon>\n            </button>\n          </div>\n        </div>\n        <div class="acountSetting__items__item acountSetting__items__item--mail">\n          <span class="acountSetting__items__item__title acountSetting__items__item__title--mail">メールアドレス</span>\n          <div class="acountSetting__items__item__parts">\n            <span class="acountSetting__items__item__text acountSetting__items__item__text--mail">\n              ${i}\n            </span>\n            <button class="acountSetting__items__item__editBtn acountSetting__items__item__editBtn--mail">\n              <ion-icon name="pencil"></ion-icon>\n            </button>\n          </div>\n        </div>\n        <div class="acountSetting__items__item acountSetting__items__item--username">\n          <span class="acountSetting__items__item__title acountSetting__items__item__title--username">ユーザーネーム</span>\n          <div class="acountSetting__items__item__parts">\n            <span class="acountSetting__items__item__text acountSetting__items__item__text--username">\n              ${n}\n            </span>\n            <button class="acountSetting__items__item__editBtn acountSetting__items__item__editBtn--username">\n              <ion-icon name="pencil"></ion-icon>\n            </button>\n          </div>\n        </div>\n        <div class="acountSetting__items__item acountSetting__items__item--password">\n          <span class="acountSetting__items__item__title acountSetting__items__item__title--password">パスワード</span>\n          <div class="acountSetting__items__item__parts">\n            <span class="acountSetting__items__item__text acountSetting__items__item__text--password">\n              ***********\n            </span>\n            <a class="acountSetting__items__item__editBtn acountSetting__passwordChangeBtn">\n              パスワードを変更\n            </a>\n          </div>\n        </div>\n      </div>\n      <a class="acountSetting__logoutBtn" href="/users/${e}/logout">ログアウト</a>\n    </section>\n  `)(e,t,n,i)),document.querySelector("header").insertAdjacentHTML("afterend",'\n    <div class="acountSetting__cover"></div>\n  ');const _=document.querySelector(".acountSetting__cover"),a=document.querySelector(".acountSetting");a.querySelector(".acountSetting__closeBtn").addEventListener("click",(()=>{a.remove(),_.remove()})),((e,t,n,i,_)=>{const a=e.querySelector(".acountSetting__items"),o=e.querySelector(".acountSetting__logoutBtn");e.querySelector(".acountSetting__items__item__editBtn--icon").addEventListener("click",(()=>{D(a),z(o),a.insertAdjacentHTML("beforeend",V("icon",t,n)),e.querySelector(".acountSetting__form__iconImage__preview__input").addEventListener("change",(()=>{const t=e.querySelector(".acountSetting__form__iconImage__preview--after").lastElementChild;L(event,t)})),e.insertAdjacentHTML("afterbegin",'\n    <button class="acountSetting__backBtn" type="button">\n      <ion-icon name="caret-back-outline"></ion-icon>\n      <span>戻る</span>\n    </button>\n  ');const i=document.querySelector(".acountSetting__backBtn");i.addEventListener("click",(()=>{document.querySelector(".acountSetting__form").remove(),i.remove(),U(a),G(o)}))})),e.querySelector(".acountSetting__items__item__editBtn--mail").addEventListener("click",(()=>{D(a),z(o),a.insertAdjacentHTML("beforeend",V("mail",t,_)),e.insertAdjacentHTML("afterbegin",'\n    <button class="acountSetting__backBtn" type="button">\n      <ion-icon name="caret-back-outline"></ion-icon>\n      <span>戻る</span>\n    </button>\n  ');const n=document.querySelector(".acountSetting__backBtn");n.addEventListener("click",(()=>{document.querySelector(".acountSetting__form").remove(),n.remove(),U(a),G(o)}))})),e.querySelector(".acountSetting__items__item__editBtn--username").addEventListener("click",(()=>{D(a),z(o),a.insertAdjacentHTML("beforeend",V("username",t,i)),e.insertAdjacentHTML("afterbegin",'\n    <button class="acountSetting__backBtn" type="button">\n      <ion-icon name="caret-back-outline"></ion-icon>\n      <span>戻る</span>\n    </button>\n  ');const n=document.querySelector(".acountSetting__backBtn");n.addEventListener("click",(()=>{document.querySelector(".acountSetting__form").remove(),n.remove(),U(a),G(o)}))}))})(a,e,t,n,i)})(t.value,n.value,i.value,_.value))),t.remove(),n.remove(),i.remove(),_.remove()})(),y(),h(),q(),b(".recipeAction__btn--delete","削除しますか"))})();